<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Todos</title>
    <link rel="stylesheet" href="index.css" />
  </head>

  <body onload="displayTodo()">
    <!-- Navbar -->
    <section class="navbar">
      <ul class="navbar-ul">
        <div class="navbar-left">
          <li class="navbar-logo navbar-li">
            <a href=""
              ><img src="https://romantic-bassi-f50129.netlify.app/images/logo.png" alt=""
            /></a>
          </li>
        </div>
        <div class="navbar-right">
          <li class=""><a href="index.html">Home</a></li>
          <li class=""><a href="portfolio.html">Portfolio</a></li>
          <li class=""><a href="blog.html">Blog</a></li>
          <li class=""><a href="about_us.html">About Us</a></li>
          <li class=""><a href="contact.html">Contact</a></li>
          <li class=""><a href="todos.html">Todos</a></li>
        </div>
      </ul>
    </section>
    <!-- Page title -->
    <div class="page-title">Todos</div>

    <!-- Input Todos -->

    <div class="todos">
      <div>Input your to do lists</div>
      <input type="text" class="form-control" id="add-todo" placeholder="todos..." />
      <button class="btn btn-primary" onclick="submitTodo()">Add</button>
    </div>

    <div class="list-todo"></div>

    <!-- Footer -->
    <footer>
      <!-- about -->
      <div class="footer-about">
        <div class="footer-about-title">About Us</div>
        <div class="footer-about-subtitle">
          Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt
          ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation
          ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in
          reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
        </div>
        <button class="footer-about-button">Learn more</button>
        <div class="footer-about-title">Photo Stream</div>
        <div class="footer-button-img-container">
          <img
            class="footer-about-img"
            src="https://romantic-bassi-f50129.netlify.app/images/g1.jpg"
            alt=""
          />
          <img
            class="footer-about-img"
            src="https://romantic-bassi-f50129.netlify.app/images/g2.jpg"
            alt=""
          />
          <img
            class="footer-about-img"
            src="https://romantic-bassi-f50129.netlify.app/images/g3.jpg"
            alt=""
          />
          <img
            class="footer-about-img"
            src="https://romantic-bassi-f50129.netlify.app/images/g1.jpg"
            alt=""
          />
          <img
            class="footer-about-img"
            src="https://romantic-bassi-f50129.netlify.app/images/g2.jpg"
            alt=""
          />
          <img
            class="footer-about-img"
            src="https://romantic-bassi-f50129.netlify.app/images/g3.jpg"
            alt=""
          />
        </div>
      </div>
      <!-- tweets -->
      <div class="footer-tweets">
        <div class="footer-tweets-title">Latest tweets</div>
        <ul style="list-style-image: url(https://romantic-bassi-f50129.netlify.app/images/tw.png)">
          <li>Lorem ipsum consectetuer adipiscing elit, seddia web design</li>
          <li>Lorem ipsum consectetuer adipiscing elit, seddia web design</li>
          <li>Lorem ipsum consectetuer adipiscing elit, seddia web design</li>
          <li>Lorem ipsum consectetuer adipiscing elit, seddia web design</li>
          <li>Lorem ipsum consectetuer adipiscing elit, seddia web design</li>
        </ul>
        <div class="footer-tweets-title">Social Connecting</div>
        <div class="footer-tweets-social-container">
          <img
            src="https://cdn-icons-png.flaticon.com/128/20/20837.png"
            alt=""
            style="width: 1.5rem"
          />
          <img
            src="https://cdn-icons-png.flaticon.com/128/59/59490.png"
            alt=""
            style="width: 1.5rem"
          />
          <img
            src="https://cdn-icons-png.flaticon.com/128/81/81693.png"
            alt=""
            style="width: 1.5rem"
          />
          <img
            src="https://cdn-icons-png.flaticon.com/128/20/20837.png"
            alt=""
            style="width: 1.5rem"
          />
          <img
            src="https://cdn-icons-png.flaticon.com/128/20/20837.png"
            alt=""
            style="width: 1.5rem"
          />
        </div>
      </div>
      <!-- contact -->
      <div class="footer-contact">
        <div class="footer-contact-title">Contact info</div>
        <ul style="list-style-image: url(https://romantic-bassi-f50129.netlify.app/images/msg.png)">
          <li>Lorem ipsum consectetuer adipiscing elit, seddia web design</li>
          <li>Phone: +1 800 258 2689</li>
          <li>Email: info(at)skokov.com</li>
        </ul>
        <div class="footer-contact-title">Follow Us</div>
        <div class="footer-contact-subtitle">
          Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod
        </div>
      </div>
    </footer>
    <!-- Navbar bottom -->
    <section class="navbar-bottom">
      <div class="navbar-bottom-title">Â© 2020HACKTIV8 WORKSHOP PROGRAM NAMA KAMU SENDIRI</div>
      <ul style="list-style-type: none; display: flex; gap: 2rem">
        <li><a href="index.html">HOME</a></li>
        <li><a href="portfolio.html">PORTFOLIO</a></li>
        <li><a href="blog.html">BLOG</a></li>
        <li><a href="about_us.html">ABOUT US</a></li>
        <li><a href="contact.html">CONTACT</a></li>
        <li><a href="todos.html">TODOS</a></li>
      </ul>
    </section>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
      crossorigin="anonymous"
    ></script>
    <script>
      function displayTodo() {
        const todos = localStorage.getItem("todos");

        if (todos) {
          const listTodo = JSON.parse(todos);
          let html = "";
          listTodo.forEach((todo, index) => {
            html += `
                    <div class="list-group list-group-horizontal bg-transparent">
                            <div class="" style="display:flex; margin-bottom:1rem">
                                <div class="form-check">
                                    <input type="checkbox" id="exampleCheck1" ${
                                      todo.checked ? "checked" : ""
                                    } onchange="checkTodo(${todo.id})">
                                </div>
                                <input type="text" class="todoName" data-id="${todo.id}" value="${
              todo.name
            }" onchange="updateTodo(${todo.id})" />
                                <button type="button" onclick="deleteTodo(${
                                  todo.id
                                })">Delete</button>
                            </div>
                    </div>
                    `;
          });
          document.querySelector(".list-todo").innerHTML = html;
        }
      }

      function checkTodo(id) {
        let todos = JSON.parse(localStorage.getItem("todos"));

        const findIndex = todos.findIndex((todo) => todo.id === id);

        todos[findIndex].checked = !todos[findIndex].checked;
        localStorage.setItem("todos", JSON.stringify(todos));
        displayTodo();
      }

      function updateTodo(id) {
        const todo = document.querySelector(`.todoName[data-id="${id}"]`).value;

        let todos = JSON.parse(localStorage.getItem("todos"));

        const findIndex = todos.findIndex((todo) => todo.id === id);

        todos[findIndex].name = todo;

        localStorage.setItem("todos", JSON.stringify(todos));

        displayTodo();
      }

      function deleteTodo(id) {
        const confirmDelete = confirm("Apakah anda yakin ingin menghapus todo ini?");

        if (!confirmDelete) return;

        let todos = JSON.parse(localStorage.getItem("todos"));

        const todo = todos.find((todo) => todo.id === id);

        if (todo.checked) {
          const todoFilter = todos.filter((todo) => todo.id !== id);
          localStorage.setItem("todos", JSON.stringify(todoFilter));
        } else {
          alert("Todo belum di check");
        }

        displayTodo();
      }

      function submitTodo() {
        const todo = document.getElementById("add-todo").value;

        let todos = JSON.parse(localStorage.getItem("todos"));

        if (todos && todos.length > 0) {
          todos.push({
            id: todos[todos.length - 1].id + 1,
            name: todo,
            checked: false,
          });
        } else {
          todos = [
            {
              id: 0,
              name: todo,
              checked: false,
            },
          ];
        }

        localStorage.setItem("todos", JSON.stringify(todos));

        document.getElementById("add-todo").value = "";

        displayTodo();
      }
    </script>
  </body>
</html>
